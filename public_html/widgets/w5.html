<link rel="import" href="../js/polymer.html">
<script src="../js/moment.js"></script>
<polymer-element name="w5-item" extend="li" attributes="text href value" assetpath="/">
    <script>
        Polymer('w5-item', {
            text: null,
            href: null,
            value: null,
            ready: function() {
                console.log('w5-item')
            }
        });
    </script>
</polymer-element>
<!-- 
    Document   : link
    Created on : Oct 8, 2013, 12:01:19 PM
    Author     : jeroldan
-->

<polymer-element name="w5-link" attributes="name text href target icon " assetpath="/">

    <template>
        <a href="{{href}}" id="{{name}}" title="{{name}}" target="{{target}}"><span class="glyphicon {{icon}}"></span> {{text}}</a>
    </template>

    <script>
        Polymer('w5-link', {
            name: "",
            text: "Link",
            icon: "",
            href: null,
            target: "_self", //_self (por defecto misma ventana o vacio), _blank (nueva ventana)
            created: function() {
                // Constructor like
            }
        });
    </script>

</polymer-element>
<!--
 Copyright 2013 The Polymer Authors. All rights reserved.
 Use of this source code is governed by a BSD-style
 license that can be found in the LICENSE file.
-->

<!-- 
    Document   : button
    Created on : Oct 8, 2013, 12:01:19 PM
    Author     : jeroldan
-->


<polymer-element name="w5-button" attributes="text icon state action tabindex" assetpath="/">

    <template>
        <button id="button" type="{{type}}" class="btn btn-default btn-sm" on-click="{{onClick}}" tabindex="{{tabindex}}">
            <template bind="" if="{{icon != &apos;&apos;}}">
                <span class="glyphicon {{icon}}"></span>
            </template>
            {{text}}
        </button> 
    </template>
    
    <script>
        Polymer('w5-button',{
            
            text     : "",
            icon     : "",
            state    : "normal", // normal | disabled | hidden
            action   : null,
            tabindex : "",
            type     : "button",
            
            onClick : function () {
                actions[this.action]();
            },
            
            actionChanged : function () {
                if (this.action == 'submit')
                    this.type="submit";
            },
                    
            stateChanged : function () {        
                switch(this.state) {
                    case "normal" :
                        this.$.button.hidden = false;
                        this.$.button.disabled = false;
                        break;
                    case "disabled" :
                        this.$.button.hidden = false;
                        this.$.button.disabled = true;
                        break;
                    case "hidden" : 
                        this.$.button.hidden = true;
                        break;
                }
            }
        });
    </script>

</polymer-element>
<!-- 
    Document   : form
    Author     : jeroldan
-->
<polymer-element name="w5-form" attributes="name legend action colspan" assetpath="/">
    <template>
        <div class="col-lg-{{colspan}}" style="margin : 5px;">
            <div class="well">
                <form class="form-horizontal" action="{{action}}">
                    <fieldset>
                        <template bind="" if="{{legend}}">
                        <legend>{{legend}}</legend>
                        </template>
                        <content></content>
                        <button type="submit" class="btn btn-sm btn-default pull-right">OK</button>
                    </fieldset>
                </form>
            </div>
        </div>
    </template>
    <script>
        Polymer('w5-form', {
            name: "",
            action: null,
            legend: null,
            colspan: "12",
            ready: function() {
                // Constructor like
            }
        });
    </script>
</polymer-element>
<polymer-element name="w5-textfield" attributes="value state label placeholder validator colspan required tabindex name" assetpath="/">   
    <template>

        <div id="textfield" class="form-group">
            <label id="label" for="box" class="col-md-{{labelWidth}} control-label">{{label}}</label>
            <template bind="" if="{{state!=&apos;info&apos;}}">
                <div class="col-md-{{fieldWidth}}">
                    <input name="{{name}}" type="text" id="box" class="form-control input-sm" placeholder="{{placeholder}}" value="{{value}}" tabindex="{{tabindex}}">
                </div>
            </template>
            <template bind="" if="{{state==&apos;info&apos;}}">
                <div class="col-md-{{fieldWidth}}">
                    <p class="form-control-static">{{value}}</p>
                </div>
            </template>
        </div>
    </template>
    
    <script>
        Polymer('w5-textfield',{
            
            value : "",
            state : "normal", // normal | disabled | info | hidden
            label : "",
            placeholder : "Enter text",
            validator : "",
            colspan : "12",
            required : "false",
            tabindex : "",
            
            labelWidth : "0",
            fieldWidth : "12",
            
            ready : function() {
                this.classList.add("col-md-"+this.colspan);
                if (this.label == "")
                    this.shadowRoot.querySelector(".control-label").classList.add('hide')
            },
            valueChanged : function () {
                if (validators && this.validator && validators[this.validator]) {
                    var valid = validators[this.validator](this.value);
                    var field = this.shadowRoot.querySelector('.form-group');
                    switch (valid) {
                        case "success" : 
                            field.classList.add("has-success");
                            field.classList.remove("has-warning");
                            field.classList.remove("has-error");
                            break;
                        case "warning" : 
                            field.classList.add("has-warning");
                            field.classList.remove("has-success");
                            field.classList.remove("has-error");
                            break;
                        case "error": 
                            field.classList.add("has-error");
                            field.classList.remove("has-warning");
                            field.classList.remove("has-success");
                            break;
                        case true : 
                            field.classList.remove("has-success");
                            field.classList.remove("has-warning");
                            field.classList.remove("has-error");
                            break;
                        case false : 
                            field.classList.add("has-error");
                            field.classList.remove("has-warning");
                            field.classList.remove("has-success");
                            break;
                    }
                }
            },
            labelChanged : function () {
                this.$.label.class = "show";
                this.labelWidth = 3;
                this.fieldWidth = 9;
            },
            requiredChanged : function () {
                this.$.label.innerHTML = "* " + this.$.label.innerHTML;
            },
            stateChanged : function () {
                var field = this.shadowRoot.querySelector('.form-group')
                var box = this.shadowRoot.querySelector('input');
                switch(this.state) {
                    case "normal" :
                        field.hidden = false;
                        box.disabled = false;
                        box.classList.remove("form-control-info");
                        break;
                    case "disabled" :
                        field.hidden = false;
                        box.disabled = true;
                        break;
                 /*   case "info" :
                        field.hidden = false;
                        box.disabled = true;
                        box.classList.add("form-control-info");
                        break;*/
                    case "hidden" : 
                        field.hidden = true;
                        break;
                }
            }
        });
   </script>
</polymer-element>
<!-- 
    Document   : combo-option
    Author     : jeroldan
-->
<polymer-element name="w5-combo-option" attributes="text data" assetpath="/">

    <template>
        <li on-click="{{onClick}}">{{text}}</li>
    </template>

    <script>
        Polymer('w5-combo-option', {
            text : "",
            data : "",
            onClick : function () {
                this.fire('optionSelected', {label : this.text, value : this.data});
            }
        });
    </script>

</polymer-element>
<!--
    http://dl.dropboxusercontent.com/u/21368/bootstrap-combobox/index.html
-->

<polymer-element name="w5-combo" attributes="name label required tabindex" assetpath="/">

    <template>
        <style>
            #combo {
                display : none;
                margin-left : 15px;
            }

            #combo.active {
                display : block;
            }

            #combo.active  li:hover{
                background-color : #AAA;
            }
        </style>
        <div class="form-group">
            <label id="label" for="box" class="col-md-{{labelWidth}} control-label">{{label}}</label>
            <div class="col-md-{{fieldWidth}} input-group" id="{{name}}">
                <input id="box" type="text" class="form-control input-sm" placeholder="{{placeholder}}" value="{{text}}" tabindex="{{tabindex}}" on-keyup="{{onKeyPressed}}">
                <input type="hidden" name="{{name}}" value="{{value}}">
                <span class="input-group-addon" on-click="{{toggleCombo}}"><i class="caret"></i></span>
                <ul id="combo" class="dropdown-menu col-md-{{fieldWidth}}">
                    <content select="w5-combo-option"></content>
                </ul>
            </div>
        </div>
    </template>

    <script>
        Polymer('w5-combo', {
            label: "",
            required: "false",
            placeholder: "Enter Text",
            tabindex: "",
            text: "",
            value: "",
            labelWidth: "0",
            fieldWidth: "12",
            items: [],
            enteredView: function() {
                this.items = [].slice.call(this.children);
                var _this = this;
                this.items.map(function(item) {
                    item.addEventListener('optionSelected', function(e) {
                        _this.optionSelected(e)
                    });
                });
            },
            labelChanged: function() {
                this.$.label.hidden = false;
                this.labelWidth = 3;
                this.fieldWidth = 9;
            },
            requiredChanged: function() {
                this.$.label.innerHTML = "* " + this.$.label.innerHTML;
            },
            toggleCombo: function() {
                if (this.$.combo.classList.contains('active'))
                    this.$.combo.classList.remove('active');
                else
                    this.$.combo.classList.add('active');
            },
            optionSelected: function(event) {
                this.text = event.detail.label;
                this.value = event.detail.value;
                this.toggleCombo();
            },
            onKeyPressed: function() {
                this.$.combo.classList.add('active');
                var _query = this.text;
                this.items.map(function(item) {
                    if (item.text.toLowerCase().indexOf(_query.toLowerCase()) == -1)
                        item.classList.add('hidden')
                    else
                        item.classList.remove('hidden')
                })
            }
        });
    </script>
</polymer-element>
<!-- 
    Document   : radio button
    Created on : Oct 8, 2013, 12:01:19 PM
    Author     : dnordonez
-->
<polymer-element name="w5-radio-button" attributes="label state colspan" assetpath="/">
    
    <template>
        <div id="radiobutton" class="form-group">  
            <label id="label" for="box" class="col-md-{{labelWidth}} control-label">{{label}}</label>
            <div class="col-md-{{fieldWidth}}">
                <content></content>
            </div>
        </div>
    </template>
    
    <script>
        Polymer('w5-radio-button',{
            
            label     : "",
            state     : "normal", // normal | disabled
            colspan   : "12",
            
            labelWidth : "0",
            fieldWidth : "12",

            labelChanged : function () {
                this.$.label.class = "show";
                this.labelWidth = 3;
                this.fieldWidth = 9;
            }
        });
   </script>
</polymer-element>
<polymer-element name="w5-radio-button-option" attributes="name value state text checked tabindex" assetpath="/">

    <template>
        <div class="input-group" state="{{state}}">
            <span class="input-group-addon">
                <input type="radio" id="{{name}}" name="{{name}}" value="{{value}}" checked="{{checked}}" tabindex="{{tabindex}}">
            </span>
            <label for="{{name}}" class="form-control">{{text}}</label>
        </div>
    </template>
 
    <script>
        Polymer('w5-radio-button-option',{
            
            id        : "",
            name      : "",    
            value     : "",
            state     : "normal", // normal | disabled
            text     : "",
            checked   : "",  // vacio | checked
            tabindex  : "",
            
            created : function() {
            },
            stateChanged : function () {
                var input = this.shadowRoot.querySelector('input');
                switch(this.state) {
                    case "normal" :
                        input.disabled = false;
                        break;
                    case "disabled" :
                        input.disabled = true;
                        break;
                }
            }
        });
    </script>
</polymer-element>
<!-- 
    Document   : checkbox
    Created on : Oct 24, 2013, 12:01:19 PM
    Author     : dnordonez
-->
<polymer-element name="w5-checkbox" attributes="label state colspan" assetpath="/">
    
    <template>
        <div id="checkbox" class="form-group">  
            <label id="label" for="box" class="col-md-{{labelWidth}} control-label">{{label}}</label>
            <div class="col-md-{{fieldWidth}}">
                <content></content>
            </div>
        </div>
    </template>
    
    <script>
        Polymer('w5-checkbox',{
            
            label     : "",
            state     : "normal", // normal | disabled
            colspan   : "12",
            
            labelWidth : "0",
            fieldWidth : "12",

            labelChanged : function () {
                this.$.label.class = "show";
                this.labelWidth = 3;
                this.fieldWidth = 9;
            }
        });
   </script>
</polymer-element>
<polymer-element name="w5-checkbox-option" attributes="name value state text checked tabindex" assetpath="/">

    <template>
        <div class="input-group" state="{{state}}">
            <span class="input-group-addon">
                <input type="checkbox" id="{{name}}" value="{{value}}" checked="{{checked}}" tabindex="{{tabindex}}">
            </span>
            <label for="{{id}}" class="form-control">{{text}}</label>
        </div>
    </template>

    <script>
        Polymer('w5-checkbox-option', {
            name: "",
            value: "",
            state: "normal", // normal | disabled
            text: "",
            checked: "", // vacio | checked
            tabindex: "",
            created: function() {
            },
            stateChanged: function() {
                var input = this.shadowRoot.querySelector('input');
                switch (this.state) {
                    case "normal" :
                        input.disabled = false;
                        break;
                    case "disabled" :
                        input.disabled = true;
                        break;
                }
            }
        });
    </script>
</polymer-element>
<!-- 
    Document   : pagination widget
    Author     : jeroldan
-->
<polymer-element name="w5-pagination" attributes="pageSize active" assetpath="/">

    <template>
        <style>
            :host > ul > li > a {
                cursor : pointer;
            }
        </style>
        <div>
            <ul class="pagination" style="display:inline;margin: 5px;">
                <template bind="" if="{{pages.length &gt; 0}}">
                <li class="{{disabled : prevDisabled}}"><a on-click="{{paginatePrev}}">&laquo;</a></li>
                <template repeat="{{page,i in pages}}">
                <li class="{{ active : page.active }} "><a on-click="{{paginate}}">{{i}}</a></li>
                </template>
                <li class="{{disabled : nextDisabled}}"><a on-click="{{paginateNext}}">&raquo;</a></li>
                </template>
            </ul>
            <span style="display: inline; margin: 5px;">
                <input type="number" min="1" max="15" value="{{pageSize}}" style="width:45px; padding-left:5px;margin:0px; border: solid 1px #EEE; border-radius:3px; height:34px">
            </span>
        </div>
    </template>

    <script>
        Polymer('w5-pagination', {
            pageSize: 0,
            dataSize: 0,
            pages: [],
            active: null,
            prevDisabled: true,
            nextDisabled: false,
            ready : function (ev) {
                //console.log('w5-pagination ready!')
            },
            paginate: function(event, detail, sender) {
                this.active = parseInt(sender.innerHTML);
            },
            paginatePrev: function() {
                if (!this.prevDisabled) {
                    this.fire('paginate', {target: this.active - 1});
                    this.active = this.active - 1;
                }
            },
            paginateNext: function() {
                if (!this.nextDisabled) {
                    this.fire('paginate', {target: this.active + 1});
                    this.active = this.active + 1;
                }
            },
            activeChanged: function(old) {
                this.pages[old] = {'active': false};
                this.pages[this.active] = {'active': true};
                this.prevDisabled = this.active === 0;
                this.nextDisabled = this.active === this.pages.length - 1;
                this.fire('paginate', {target: this.active});
            },
            dataSizeChanged: function() {
                this.updatePaginationData();
            },
            pageSizeChanged: function() {
                this.fire('resize');
                this.updatePaginationData();
            },
            updatePaginationData: function() {
                var ps = Math.floor(this.dataSize / this.pageSize);
                ps = (this.dataSize % this.pageSize) == 0 ? ps : ps + 1;
                this.pages = ps <= 1 ? null : new Array(ps);
                this.active = 0;
            }
        });
    </script>
    
</polymer-element>

<polymer-element name="w5-table" attributes="name caption height headers columns data pageSize" assetpath="/">
    <template>
        <div id="{{name}}" class="table-responsive">
            <table class="table table-bordered table-striped table-condensed table-hover">
                <caption>{{caption}}</caption>
                <thead>
                    <tr>
                        <th template="" repeat="{{header in headers}}" colspan="{{header.colspan}}" style="text-align: center">{{header.title}}</th>
                    </tr>
                    <tr>
                        <th template="" repeat="{{col in columns}}" class="col-sm-{{col.width}} col-md-{{col.width}} col-lg-{{col.width}} {{active : active==col.key}}">
                            {{col.title}}<template bind="" if="{{col.sorter}}"><a rel="{{col.key}}" on-click="{{onOrder}}"><span class="pull-right glyphicon glyphicon-chevron-down" style="cursor:pointer"></span></a></template>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr template="" repeat="{{row,i in pageData}}" on-click="onRowClick">
                        <td template="" repeat="{{col in columns}}">
                            <template bind="" if="{{col.renderer==null}}">{{row[col.key]}}</template>
                            <template bind="" if="{{col.renderer==&apos;button&apos;}}"><input type="button"></template>
                            <template bind="" if="{{col.renderer==&apos;checkbox&apos;}}"><input type="checkbox"></template>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="{{columns.length}}">
                            <w5-pagination id="pagination" class="pull-right" on-paginate="{{onPaginate}}" on-resize="{{onResizePage}}"></w5-pagination>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </template>

    <script>
        Polymer('w5-table', {
            name: "",
            caption: "Table Title",
            height: "100px",
            columns: [],
            data: [],
            page: 0,
            pageSize: 10,
            pageData: [],
            pages: null,
            active: '',
            ready: function() {
            },
            enteredView: function() {
                this.items = [].slice.call(this.children);
                var _columns = this.columns
                this.items.map(function(item) {
                    if (item.nodeName === "W5-COLUMN")
                        _columns.push({'id': item.id, 'title': item.text, 'key': item.key, 'width': '', 'colspan': '', 'sorter': 'default'})
                });
            },
            updatePageData: function() {
                var a = this.page * this.pageSize;
                this.pageData = this.data.slice(a, a + this.pageSize);
            },
            dataChanged: function() {
                this.updatePageData();
                this.$.pagination.dataSize = this.data.length;
                this.$.pagination.pageSize = this.pageSize;
            },
            pageChanged: function() {
                this.updatePageData();
            },
            onRowClick: function(e) {
                this.fire('rowClick', {msg: 'row click'});
            },
            onPaginate: function(e) {
                this.page = e.detail.target;
            },
            onResizePage : function(e,details,sender) {
                this.pageSize = sender.pageSize
                this.page=0
                this.updatePageData();
            },
            onOrder: function(e, detail, sender) {
                this.data.sort(function(a, b) {
                    if (a[sender.rel] < b[sender.rel])
                        return -1;
                    if (a[sender.rel] > b[sender.rel])
                        return 1;
                    return 0;
                });
                // must refactor!!!
                this.updatePageData();
                this.page = 0;
                this.$.pagination.active = 0;
                this.active = sender.rel;
            }
        });
    </script>

</polymer-element>
<!-- 
    Document   : menu
    Created on : Oct 8, 2013, 12:01:19 PM
    Author     : jeroldan
-->
<polymer-element name="w5-sidebar" attributes="colspan" assetpath="/">

    <template>
        <div class="col-sm-{{colspan}} col-md-{{colspan}} col-lg-{{colspan}} polymer-ui-light-bg">
            <div class="well affix">
                <content select="*"></content>
            </div>    
        </div>
    </template>

    <script>
        Polymer('w5-sidebar', {

            colspan : "",
            
            ready : function() {
                // Constructor like
            }
        });
    </script>

</polymer-element>
<!-- 
    Document   : menu
    Created on : Oct 8, 2013, 12:01:19 PM
    Author     : jeroldan
-->
<polymer-element name="w5-menu" extends="ul" attributes="name text icon" assetpath="/">

    <template>
        <style>

            :host {
                display    : block;
                cursor     : pointer;
            }

            :host > w5-menu {
                display : none;
            }

            :host.active > w5-menu {
                display      : block;
                padding-left : 30px;
                font-size    : smaller;
                text-shadow  : 0 1px 0 #fff;
            }

            :host > w5-menu-item.menu-header:first-child {
                display:  block;
                padding-left : 0px;
            }

            :host > w5-menu-item {
                display: none;
            }

            :host.active > w5-menu-item {
                display : block;
                font-size: 90%;
            }

            :host.active > w5-menu-item.menu-header:first-child {
                font-weight: bold;
                font-size: inherit;
            }

        </style>
        <w5-menu-item class="menu-header" text="{{text}}" on-click="{{toggle}}"></w5-menu-item>
        <content></content>
    </template>

    <script>
        Polymer('w5-menu', {
            name: "",
            text: "",
            icon: "",
            ready: function() {
                this.classList.add('nav');
            },
            toggle: function() {
                this.classList.contains('active') ? this.classList.remove('active') : this.classList.add('active')
            }
        });
    </script>

</polymer-element>
<!-- 
    Document   : button
    Created on : Oct 8, 2013, 12:01:19 PM
    Author     : jeroldan
-->

<polymer-element name="w5-menu-item" extends="li" attributes="name text href target icon" assetpath="/">

    <template>
        <style>
            :host {
                display     : block;
                padding-left: 30px;
                cursor      : pointer;
            }

            :host:hover { 
                opacity: 1;
                background-color: #ddd;
            }

            a { 
                color : #716b7a;
                text-decoration: none;
            }

            a:hover {
                color : #716b7a;
                text-decoration: none;
            }

        </style>
        <template bind="" if="{{href!=null}}"> <a id="{{name}}" href="{{href}}" target="{{target}}"><span class="glyphicon {{icon}}"></span> {{text}}</a></template>
        <template bind="" if="{{href==null}}"> <a id="{{name}}" target="{{target}}"><span class="glyphicon {{icon}}"></span> {{text}}</a></template>
    </template>

    <script>
        Polymer('w5-menu-item', {
            name: "",
            text: "Link",
            icon: "",
            href: null,
            target: "_self", //_self (por defecto misma ventana o vacio), _blank (nueva ventana)
            class: "",
            ready: function() {
                // Constructor like
            }
        });
    </script>

</polymer-element>
<!-- 
    Document   : menu
    Created on : Oct 8, 2013, 12:01:19 PM
    Author     : jeroldan
-->
<polymer-element name="w5-list" attributes="colspan" assetpath="/">
    <template>
        <div class="list-group col-lg-{{colspan}} col-md-{{colspan}} col-xs-{{colspan}}">
            <content></content>
        </div>
    </template>
    <script>
        Polymer('w5-list', {

        });
    </script>
</polymer-element>
<!-- 
    Document   : list-item
    Author     : jeroldan
-->
<polymer-element name="w5-list-item" attributes="text value active" assetpath="/">
    <template>
        <h4 class="list-group-item-heading">{{text}}<span class="badge pull-right">{{value}}</span></h4>
        <p class="list-group-item-text"><content></content></p>
    </template>
    <script>
        Polymer('w5-list-item', {
            active: false,
            ready: function() {
                this.classList.add("list-group-item");
            },
            activeChanged: function() {
                if (this.active) {
                    this.classList.add("active");
                } else {
                    this.classList.remove("active");
                }
            }
        });
    </script>
</polymer-element>
<!-- 
    Document   : panel
    Author     : jeroldan
-->
<polymer-element name="w5-panel" attributes="name text icon colspan collapsed collapsible" assetpath="/">

    <template>
        <div class="panel panel-default col-lg-{{colspan}}  col-md-{{colspan}}" style="padding:0px">
            <div class="panel-heading">
                <span class="glyphicon {{icon}}"></span>
                <a>{{text}}</a>
                <template bind if="{{collapsible}}">
                <span class="pull-right glyphicon glyphicon-{{icon}}" on-click="{{toggle}}"></span> 
                </template>
            </div> 
            <div class="{{hidden:!content}}">
                <div class="panel-body "><content></content></div>
            </div>
        </div>
    </template>

    <script>
        Polymer('w5-panel', {
            name    : "",
            parent  : "",
            text    : "",
            colspan : "12",
            header  : true,
            content : true,
            icon    : 'minus',
            collapsible : false,
            ready   : function() {

            },
            toggle : function () {
                this.content = !this.content;
                this.icon = this.icon === 'minus' ? 'plus' : 'minus';
            },
            hideHeader : function () {
                this.shadowRoot.querySelector('.panel-heading').style.display='none';
            },
            collapsedChanged : function () {
                this.toggle();
            }
            
        });
    </script>

</polymer-element>
<polymer-element name="w5-tabpanel" attributes="name colspan selected" assetpath="/">

    <template>
        <style>
            
            .nav-tabs > li > a {
                cursor : pointer;
            }
            
            .tab-content .tab-pane .panel {
                border-top: 0px;
                border-top-left-radius: 0px;
                border-top-right-radius: 0px;
            }
            
        </style>
        <div class="col-md-{{colspan}}">
            <ul class="nav nav-tabs" id="{{name}}">
                <template repeat="{{item in items}}">
                    <li class="{{active : selected==item.name}}" style="font-size:12px"><a rel="{{item.name}}" on-click="{{tab}}">{{item.text}}</a></li>
                </template>
            </ul>
            <div class="tab-content">
                <content select="w5-panel"></content>
            </div>
        </div>
    </template>

    <script>

        Polymer('w5-tabpanel', {
            collapsible: false,
            items: [],
            selected: "",
            enteredView : function() {
                var _selected = this.selected;
                this.items = [].slice.call(this.children);
                this.items.map(function(item) {
                    item.classList.add('tab-pane');
                    item.hideHeader();
                    if (item.id==_selected)
                        item.classList.add('active');
                });
            },
            tab : function (e, detail, sender) {
                this.selected = sender.rel; 
                this.items.map(function(item){
                    if (item.id == sender.rel) {
                         item.classList.add('active');
                     } else {
                         item.classList.remove('active');
                     }
                });
            }
        });
    </script>

</polymer-element>
<!-- 
    Document   : chart
    Created on : Nov 5, 2013, 12:01:19 PM
    Author     : jeroldan
-->
<polymer-element name="w5-chart" attributes="name kind labels points" assetpath="/">

    <template>
        <canvas id="chart" data-type="{{kind}}" width="550" height="180"></canvas>
    </template>

    <script>
Polymer('w5-chart', {
    points: "",
    data: null,
    kind: "Line",
    labels: "a,b,c,d,e,f",
    
    enteredView: function() {
        this.$.chart.width = Math.max(this.offsetWidth, 100);
        this.$.chart.height = Math.max(this.offsetHeight, 100);
        this.ctx = this.$.chart.getContext('2d');
    },

    pointsChanged: function() {
        var p = this.points.split(',').reduce(
                function(previousValue, currentValue, i, a) {
                    previousValue.push(parseFloat(currentValue));
                    return previousValue;
                }, []);

        var labels = this.labels.split(',').reduce(
                function(previousValue, currentValue, i, a) {
                    previousValue.push(currentValue);
                    return previousValue;
                }, []);

        this.data = {
            labels: labels,
            datasets: [
                {
                    fillColor: "rgba(220,220,220,0.5)",
                    strokeColor: "rgba(220,220,220,1)",
                    pointColor: "rgba(220,220,220,1)",
                    pointStrokeColor: "#fff",
                    data: p
                }
            ]
        }

        var chart = new Chart(this.ctx)[this.kind](this.data);
    }
});
    </script>
</polymer-element>
<!-- 
    Document   : modal
    Author     : jeroldan
-->

<polymer-element name="w5-modal" attributes="text type" assetpath="/">

    <template>
        <style>
            #modalLayer {
                display : none;
                top : 150px;
            }
            
            #modalLayer.active {
                display : block;
                opacity : 1;
            }
            
            .modal-dialog {
                position : relative;
                left : 0%;
            }
            
        </style>
        <div id="modalLayer" class="modal fade {{active : actived}}" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" style="margin-top:150px">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" aria-hidden="true" on-click="{{close}}">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">{{text}}</h4>
                    </div>
                    <div class="modal-body">
                        <content select="p"></content>
                    </div>
                    <div class="modal-footer">
                        <content select="button"></content>
                    </div>
                </div>
            </div>
            <div class="modal-backdrop fade in" style="opacity:0.5"></div>
        </div>
    </template>

    <script>
        Polymer('w5-modal', {
            text: "",
            actived : false,
            open : function () {
                this.actived = true;
            },
            close : function() {
               this.fire('close');
               this.actived = false;
            },
        });
    </script>

</polymer-element>
<!-- 
    Document   : calendar
    Author     : jeroldan
-->
<polymer-element name="w5-modal-alert" extends="w5-modal" attributes="action" assetpath="/">

    <template>
        <w5-modal id="modal" text="{{text}}">
            <content></content>
            <button type="button" class="btn btn-primary" on-click="{{close}}">OK</button>
        </w5-modal>
    </template>

    <script>
        Polymer('w5-modal-alert', {
            action : null,
            open : function () {
                this.$.modal.open();
            },
            close : function () {
                if (this.action != null) 
                    actions[this.action]();
                this.$.modal.close();
            }
        });
    </script>

</polymer-element>
<!-- 
    Document   : modal-confirm
    Author     : jeroldan
-->
<polymer-element name="w5-modal-confirm" extends="w5-modal" attributes="name okAction cancelAction" assetpath="/">

    <template>
        <w5-modal id="modal" text="{{text}}">
            <content></content>
            <button type="button" class="btn btn-default" on-click="{{cancel}}">Cancel</button>
            <button type="button" class="btn btn-primary" on-click="{{ok}}">OK</button>
        </w5-modal>
    </template>

    <script>
        Polymer('w5-modal-confirm', {
            
            okAction : null,
            cancelAction : null,
            
            open: function() {
                this.$.modal.open();
            },
            cancel: function() {
                this.fire('cancel');
                if (this.cancelAction != null) 
                    actions[this.cancelAction]();
                this.$.modal.close();
            },
            ok: function() {
                this.fire('ok');
                if (this.okAction != null) 
                    actions[this.okAction]();
                this.$.modal.close();
            }
        });
    </script>

</polymer-element>
<!-- 
    Document   : date picker
    Author     : jeroldan
-->
<polymer-element name="w5-date-picker" attributes="colspan label name format state startDate" assetpath="/">
    
    <template>   
        <div class="form-group ">
            <label id="label" for="box" class="col-md-{{labelWidth}} control-label">{{label}}</label>
            <template bind="" if="{{state!=&apos;info&apos;}}">                
            <div class="col-md-{{fieldWidth}} input-group date" id="{{name}}">
                <input id="box" name="{{name}}" type="text" class="form-control" placeholder="{{placeholder}}" value="{{value}}" tabindex="{{tabindex}}">
                <span class="input-group-addon" on-click="{{showCalendar}}"><i class="glyphicon glyphicon-calendar"></i></span>
            </div>
            </template>
            <template bind="" if="{{state==&apos;info&apos;}}">
            <div class="col-md-{{fieldWidth}}">
                <p class="form-control-static">{{value}}</p>
            </div>
            </template>
            <w5-calendar id="calendar" text="{{label}}" on-selected="{{onDaySelected}}"></w5-calendar>
        </div>
    </template>

    <script>
        Polymer('w5-date-picker', {
            
            value : "",
            state : "normal", // normal | disabled | info | hidden
            label : "",
            placeholder : "Enter text",
            validator : "",
            colspan : "12",
            required : "false",
            tabindex : "",

            format: "dddd, MMMM Do YYYY", 
            startDate: "",

            ready : function() {
                this.classList.add("col-md-"+this.colspan);
                if (this.label == "")
                    this.shadowRoot.querySelector(".control-label").classList.add('hide')
            },
            labelChanged : function () {
                this.$.label.class = "show";
                this.labelWidth = 3;
                this.fieldWidth = 9;
            },            
            showCalendar: function() {
                this.$.calendar.open();
            },
            onDaySelected: function(event, detail, sender) {
                this.value = moment(detail.date).format(this.format);
                this.$.calendar.close();
            }
        });
    </script>
</polymer-element>
<!-- 
    Document   : calendar
    Author     : jeroldan
-->
<polymer-element name="w5-calendar" attributes="text" assetpath="/">

    <template>
        <style>
            .table-cell-hover tbody tr td:hover {
                background-color : blue;
                cursor : pointer;
            }

            .table-cell-hover tbody tr td.highlight {
                background-color: red;
            }

            .table {
                margin-bottom: 0px;
            }

            .table-bordered > thead > tr > th {
                border-bottom: 1px;
            }

            #modalLayer {
                display : none;
                
            }
            #modalLayer.active {
                display : block;
                opacity : 1;
            }
            .modal-dialog {
                position : relative;
                left : 0%;
                margin-top : 250px;
                border-bottom: 0px;
            }
            .modal-header {
                padding : 5px;
                border-bottom: 0px;
            }
            .modal-body {
                padding : 0px;
            }
            .modal-footer {
                padding    : 5px;
                margin-top : 0px;
            }
        </style>
        <div id="modalLayer" class="modal fade {{active : actived}}" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" aria-hidden="true" on-click="{{close}}">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">{{text}}</h4>
                    </div>
                    <div class="modal-body">
                        <table class="table table-bordered table-striped table-condensed table-cell-hover">
                            <thead>
                                <tr>
                                    <th colspan="4" style="border-right : 0px">
                                        <span class="glyphicon glyphicon-chevron-left" on-click="{{prevMonth}}"></span>
                                        {{month.name}}
                                        <span class="glyphicon glyphicon-chevron-right" on-click="{{nextMonth}}"></span>
                                    </th>
                                    <th colspan="3" style="border-left:0px; text-align: right">
                                        <span class="glyphicon glyphicon-chevron-left" on-click="{{prevYear}}"></span>
                                        {{year}}
                                        <span class="glyphicon glyphicon-chevron-right" on-click="{{nextYear}}"></span>
                                    </th>
                                </tr><tr>
                                </tr><tr>
                                    <th template="" repeat="{{day in dates.daysMin}}" style="text-align: center">{{day}}</th>
                            </tr></thead>
                            <tbody>
                                <tr template="" repeat="{{week in month.weeks}}"> 
                                    <td template="" repeat="{{day in week.days}}" on-click="{{selectDay}}" date="{{day.date}}" style="text-align: center" class="{{highlight : day.highlight}}">{{day.day}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <content select="button"></content>
                    </div>
                </div>
            </div>
            <div class="modal-backdrop fade in" style="opacity:0.5"></div>
        </div>
    </template>

    <script>
        Polymer('w5-calendar', {
            
            text : '',
            
            dates: {
                days       : ["Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo"],
                daysShort  : ["Lun", "Mar", "Mie", "Jue", "Vie", "Sab", "Dom"],
                daysMin    : ["D","L", "M", "X", "J", "V", "S"],
                months     : ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                monthsShort: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"]
            },
            
            year : 2013,
            
            month : {
                index : 10,
                name : 'Noviembre',
                startingDay : '3',
                days : '30',
                weeks : [ 
                    { days : []},
                    { days : []},
                    { days : []},
                    { days : []},
                    { days : []},
                    { days : []}
                ]
            },
            actived : false,
            ready : function () {

            },
            enteredView : function () {
                this.setMonth(new Date());
                this.highlightDay(new Date());
            },
            open : function () {
                this.actived = true;
            },
            close : function() {
               this.fire('close');
               this.actived = false;
            },
            selectDay: function(event, detail, sender) {
                this.fire('selected', {'date' : sender.getAttribute('date')});
              
            },
            highlightDay : function (date) {
                var y = date.getFullYear(), m = date.getMonth();
                var firstDay = new Date(y, m, 1).getDay();
                var week = Math.floor( (firstDay + date.getDate() -1 ) / 7);
                this.month.weeks[week].days[date.getDay()].highlight = true;
            },
            prevYear : function () {
                this.setMonth(new Date(this.year-1, this.month.index, 1));
            },
            nextYear : function () {
                this.setMonth(new Date(this.year+1, this.month.index, 1));
            },
            prevMonth : function () {
                this.setMonth(new Date(this.year, this.month.index-1, 1));
            },
            nextMonth : function () {
                this.setMonth(new Date(this.year, this.month.index+1, 1));
            },
            setMonth : function (date) {

                var y = date.getFullYear(), m = date.getMonth();
                var firstDay = new Date(y, m, 1).getDay();
                var monthLength = new Date(y, m + 1, 0).getDate();

                var newMonth =  {
                    index : m,
                    name : this.dates.months[m],
                    weeks : [ 
                        { days : []},
                        { days : []},
                        { days : []},
                        { days : []},
                        { days : []},
                        { days : []}
                    ]
                }
                
                for (var i=0; i < monthLength;i++) {
                    var d = new Date(y, m, i+1);
                    var week = Math.floor( (firstDay + d.getDate() -1 ) / 7);
                    newMonth.weeks[week].days[d.getDay()] = { 'date' : d.toString(), 'day' : d.getDate()};
                }

                this.month = newMonth;
                this.year = y;

            }
        });
    </script>

</polymer-element>

<polymer-element name="w5-gallery" attributes="name colspan columns rows" assetpath="/">
    <template>
        <div class="well col-sm-{{colspan}} col-md-{{colspan}} col-lg-{{colspan}}">
            <div class="row">
                <template repeat="{{item in pageItems}}">
                    <a href="{{item.href}}">
                        <div class="col-sm-{{itemColspan}} col-md-{{itemColspan}} col-lg-{{itemColspan}}">
                            <div class="thumbnail">
                                <img src="{{item.img}}" alt="...">
                                <div class="caption center-block">
                                    <h3 style="text-align:center">{{item.label}}</h3>
                                    <p>{{item.text}}</p>
                                </div>
                            </div>
                        </div>
                    </a>
                </template>

            </div>
            <div class="row">
                <w5-pagination id="pagination" class="pull-right" on-paginate="{{onPaginate}}"></w5-pagination>
            </div>
        </div>
    </template>

    <script>
        Polymer('w5-gallery', {
            name: "",
            colspan: "12",
            columns: 6,
            rows: 2,
            items: [],
            itemColspan: 2,
            page: 0,
            pageSize: 6,
            pageItems: [],
            enteredView: function() {
                this.items = [].slice.call(this.children);
                this.updatePageData();
                this.$.pagination.dataSize = this.items.length;
                this.$.pagination.pageSize = this.pageSize;
            },
            pageChanged: function() {
                this.updatePageData();
            },
            pageSizeChanged: function() {
                console.log(this.pageSize);
                this.updatePageData();
            },
            onPaginate: function(e) {
                this.page = e.detail.target;
            },
            updatePageData: function() {
                var a = this.page * this.pageSize;
                this.pageItems = this.items.slice(a, a + this.pageSize);
            },
            columnsChanged: function() {
                if (this.columns == 1) {
                    this.itemColspan = 12;
                } else {
                    this.itemColspan = Math.floor(12 / this.columns);
                }
                this.pageSize = this.columns * this.rows;
                this.$.pagination.pageSize = this.pageSize;

            },
            rowsChanged: function() {
                this.pageSize = this.columns * this.rows;
                this.$.pagination.pageSize = this.pageSize;
            }
        });
    </script>

</polymer-element>
<polymer-element name="w5-gallery-item" attributes="name img label text href" assetpath="/">
    <template>
        
    </template>
    <script>
        Polymer('w5-gallery-item', {
            'name': '',
            'img': '',
            'label': '',
            'text': '',
            'href':''
        });
    </script>
</polymer-element>





























